# Documentation
## Project Details
- **Project Name**:
    - Server
- **Team members and contributions**:
    - *wfu16*:
        - User Story 1
        - MockedData
        - less CSV
        - less User Story 2
        - tests
        - documentation
    - *dsaunde2*:
        - most CSV
        - most User Story 2
        - User Story 3
- **Total estimated time**:
    - 20 hours
- A link to [our repo](https://github.com/julia-fu0528/Server)

## Design Choices
- **Main Directory**
    - *Handlers*
        - *LoadHandler*
            - Endpoint "loadcsv", with query "filepath"
            - MissingFilePathResponse if no query at key "filepath" is provided
            - InaccessibleCSVResponse if the value provided at query "filepath" is not found
            - CSVParsingFailureResponse if error occurs when parsing the csv file
            - CSVParsingSuccessResponse if csv file is successfully retrieved and parsed
                - *result*: "success"
                - *filepath*: the given query value
                - *message*: "CSV File ... successfully stored. Contents accessible in endpoint viewcsv"
        - *ViewHandler*
            - Endpoint "viewcsv"
            - ViewCSVFailureResponse if no csv file has been loaded yet
            - ViewCSVSuccessResponse if csv file has been loaded
                - *result*: "success"
                - *data*: parsed csv file output as a 2d array in Json
                - *message*: "File available for view."
        - *SearchHandler*
            - Endpoint "searchcsv", with queries "column" and "value". "column" can be index or header. 
            - MissingColumnResponse if no query at key "column" is provided
            - MissingValueResponse if no query at key "value" is provided
            - SearchFailureResponse if search fails
            - ValueNotFoundResponse if the value is not found at the given column
            - SearchSuccessResponse if the value is found at the given column
                - *result*: "success"
                - *data*: rows where the value is present in the given column, presented as 2d array in Json
                - *column*: the given query value at key "column"
                - *value*: the given query value at key "value"
                - *message*: "Value successfully searched"
    - *Weather*
        - *Requester*
        - *Data*
        - *WeatherCachingProxy*
        - *WeatherHandler*
    - *Servers*
        - *LoadedFiles*
            - field: generic type storage
            - method getFile: returns storage, raises NoFileStoredException when storage is null
            - method storeFile: void, changes the value of the field storage to the given file
        - *Server*
            - the main class
            - initiates the "loadcsv", "viewcsv", "searchcsv", and "weather" endpoints
    - *Exceptions*
        - FileNotFoundException, NoFileStoredException, SearchFailureException
    - *CSV*
        - Algos: CSVParser and Search classes
        - CSVMain: main class for CSV
        - RowCreators: the two creators that developers might want for the csv rows
            - Person: new data structure Person
            - RowCreator: List of Strings
    - *data*
        - made example files: csv files that are either empty or nonempty, either with headers or without headers
        - given example files: stardata and ten-star csv
- **test Directory**
    - *TestSuites*
        - TestCSV: tests "loadcsv" + "viewcsv" + "searchcsv" success
        - TestLoad: tests "loadcsv" edge cases : failure/exception response
        - TestView: tests "viewcsv" edge cases : failure/exception response
        - TestSearch: tests "searchcsv" edge cases : failure/exception response
        - TestWeather: tests "weather"
      
## Errors/Bugs
- We currently don't have any errors or bugs.

## Tests
- *The following each points out the purpose of each individual test, sequentially.*
    - **Loadcsv**
        - MissingFilePathResponse: missing filepath query
        - InaccessibleCSVResponse: filepath doesn't exist
        - CSVParsingSyccessResponse: empty file
        - CSVParsingSuccessResponse: basic file
    - **Viewcsv**
        - ViewCSVFailureResponse: No csv stored yet
        - ViewCSVSuccessResponse: empty csv
        - ViewCSVSuccessResponse: empty csv with headers
        - ViewCSVSuccessResponse: small csv
        - ViewCSVSuccessResponse: large csv
    - **Searchcsv**
        - MissingColumnResponse: no column query
        - MissingValueResponse: no value query
        - SearchFailureResponse: no value found
        - SearchSuccessResponse: column index
        - SearchSuccessResponse: column header
        - SearchSuccessResponse: single row
        - SearchSuccessResponse: multiple rows
## How To
- **Run the Tests**
    - JUnit test
- **Build our program**
    - First provide the backend csv parser and searcher
    - build the handlers
    - provide the data
    - Then implement the server
- **Run our program**
    - enter "localhost:3232/" in the browser
    - enter endpoints and queries into the api